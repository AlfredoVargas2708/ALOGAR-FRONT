<div class="container">
    <div class="categories">
        <p>Categorías</p>
        <div #categoriasContainer class="categories-list">
            <div class="category" *ngFor="let category of categories"
                [ngClass]="{'selected': selectedCategory === category.category_id}"
                (click)="changeCategory(category.category_id)">
                <img [src]="category.category_image" alt="Category Icon">
                <p>{{ category.category }}</p>
            </div>
        </div>
        <div class="buttons">
            <button class="btn btn-up" (click)="scrollToTop()">
                <img src="https://img.icons8.com/ios/50/sort-up.png" alt="Arrow Up">
            </button>
            <button class="btn btn-down" (click)="scrollToBottom()">
                <img src="https://img.icons8.com/ios/50/sort-down.png" alt="Arrow Down">
            </button>
        </div>
    </div>
    <div class="loader-container" *ngIf="isLoadingProducts">
        <div class="loader"></div>
    </div>
    <div class="products" *ngIf="!isLoadingProducts">
        <h1>Productos</h1>
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

            <!-- Imagen -->
            <ng-container matColumnDef="imagen">
                <th mat-header-cell *matHeaderCellDef> Imagen </th>
                <td mat-cell *matCellDef="let product">
                    <img [src]="product.product_image" alt="" style="width: 50px;">
                </td>
            </ng-container>

            <!-- Código -->
            <ng-container matColumnDef="codigo">
                <th mat-header-cell *matHeaderCellDef> Código </th>
                <td mat-cell *matCellDef="let product">
                    {{ product.product_code ? product.product_code : 'N/A' }}
                </td>
            </ng-container>

            <!-- Nombre -->
            <ng-container matColumnDef="nombre">
                <th mat-header-cell *matHeaderCellDef> Nombre </th>
                <td mat-cell *matCellDef="let product">
                    {{ product.product }}
                </td>
            </ng-container>

            <!-- Precio -->
            <ng-container matColumnDef="precio">
                <th mat-header-cell *matHeaderCellDef> Precio </th>
                <td mat-cell *matCellDef="let product">
                    {{ product.price | currency: 'CLP':'symbol' }}
                </td>
            </ng-container>

            <!-- Acciones -->
            <ng-container matColumnDef="acciones">
                <th mat-header-cell *matHeaderCellDef> Acciones </th>
                <td mat-cell *matCellDef="let product">
                    <div class="actions">
                        <button class="btn edit">Edit</button>
                        <button class="btn delete">Delete</button>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <mat-paginator [length]="totalProducts" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20]" (page)="onPageChange($event)">
        </mat-paginator>
    </div>
</div>